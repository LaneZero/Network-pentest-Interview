# Network-pentest-Interview
سوالات مصاحبه تست نفوذ شبکه و پاسخ ها
تست نفوذ شبکه یا زیرساخت 

سوالات مصاحبه تست نفوذ شبکه سطح متوسط:
1. تست نفوذ شبکه تعریف کنید.
تست نفوذ شبکه  فرآیند ارزیابی امنیتی یک شبکه با شبیه سازی حملات شناخته شده در بستری (اسکوپی) مشخص میباشد. تست نفوذ کمک می کند تا سازمان ها گپهای امنیتی و نقاط ضعف خود مثل آسیب پذیریهای زیرساخت شبکه سیستم عامل ها و مشکلات امنیتی در کانفیگ را کشف و رفع کنند.

 2. مراحل تست نفوذ شبکه را نام ببرید و شرح دهید.
مراحل 7 تا است
جمع آوری اطلاعات ( نقشه شبکه مشخص کردن domain endpoint هایی که باید تست بشه)
اسکن کردن و سرشماری Enumeration که شامل اسکن port service و آسیب پذیری
اکسپلویت کردن
بکدور گذاشتن
بالا بردن سطح دسترسی
نفوذ داخل شبکه post exploit
تهیه گزارش مدیریتی و فنی


 3. چند نوع تست نفوذ شبکه داریم نام ببرید.
انواع تست نفوذ شبکه شامل
 تست نفوذ زیرساخت خارجی (اینترنت)
 تست نفوذ داخلی (شبکه داخلی)
 تست نفوذ بی سیم  ( wireless )

4. فاز information gathering یا reconnaissance  در تست نفوذ وب چیست شرح بدهید.	
این فاز شامل جمع آوری ip domain subdomain open ports services می باشد

 5. تفاوت بین اسکن آسیب پذیری vulnerability scanning  و تست نفوذ Penetration testing چیست؟
اسکن آسیب پذیری توسط یک ابزار انجام می شود و امکان false positive وجود دارد که باز نیازمند یک کارشناس تست نفوذ برای بررسی نهایی می باشد و تست نفوذ یک فرآیند شبیه سازی حملات شناخته شده روی بستر مشخص و ارائه گزارش تست می باشد.

 6. مفهوم Attack vector و Attack surface چیست شرح دهید. چگونه attack vector ها را در شبکه کشف می کنید؟
Attack vector : 
مجموع حملاتی که امکان پیاده سازی آن ها می باشد را attack vector می گوییم
Attack surface:
نقاط آسیب پذیر یا بالقوه برای نفوذ یا حمله را  attack surface  می گوییم.
Attack vector را می توان با اسکنر آسیب پذیری، تحلیل معماری شبکه شناسایی کرد.


 7. آسیب پذیری های رایج در شبکه که در طول پروژه ها برخوردید را نام ببرید.
معمول ترین مشکل ها که برخوردم پسورد دیفالت، پورت های باز و نداشتن Vlan بندی بوده است.

 8. از چه ابزارها و تکنیک هایی برای اسکن و enumeration استفاده می کنید؟
ابزارهای اسکن و شمارش عبارتند از و.
اسکنرهایی زیادی داریم که این کار می کنند:
Nikto
Nessus
Nmap
OpenVAS

 9. مفهوم Privilege escalation را تعریف کنید.
بالا بردن سطح دسترسی تکنیک های مختلفی دارد دور زدن uac، کپی کردن یک توکن و … که از یوزر ساده به یوزر سیستم یا root برسیم.
Privilege escalation horizontal:
دسترسی به منابع و اطلاعات دیگر یوزرها همسطح تو شبکه

Privilege escalation vertical
دسترسی یوزر ساده به دسترسی سیستم یا ROOT

 10. "pivot" یا "pivoting" در زمینه تست نفوذ شبکه چیست؟
فرآیند pivoting به معنای استفاده از یک سیستم و دسترسی به Route ها یا مسیرهایی که می بیند به سیستم های دیگر می باشد. 
خیلی ساده از یک وب شل میگیریم و بعد از شل شبکه را اسکن می کنیم و با یوزر و پسورد از طریق شل به یک سرور با یک ای پی که وب سرور می بیند و داخل شبکه هست و در اینترنت نیست متصل می شویم.

 11. مفهوم "سر ریز بافر" یا BOF چیست ؟
سرریز بافر یا باف BOF آسیب پذیری روی برنامه هایی می باشد که در مقدار ورودی کنترل ندارند و ورودی بیش از حد مجاز دریافت می کنند و اصطلاحا memory overwrite می کند که هکر می تواند از این آسیب پذیری برای اجرای کد به صورت لوکال یا ریموت استفاده کند.

 12. تست نفوذ شبکه وایرلس را به چه صورت انجام می دهید؟
اگر شبکه wireless شامل رمزنگاری وایرلس ضعیف مثل wps wpa wep  که توسط حمله KRACK قابل هک هستند.
همچنین بعد از دسترسی به شبکه چک می کنم آیا دسترسی به منابع دیگر مثل سرور دوربین ها وجود دارد یا نه.
بررسی mac filtering و firewall و captive portal

13. مهندسی اجتماعی چیست؟ تاکتیک های مرسوم در مهندسی اجتماعی را نام ببرید.
هنر فریفتن و سوءاستفاده از عواطف  انسان ها امکان این را دارد تا اطلاعاتی حساس که در حالت عادی نمی دهند را بتوان گرفت و همچنین آن ها را وادار به انجام کارهایی که نباید بکنند یا در حالت عادی انجام نمی دهد کرد.
برخی از تاکتیک ها 
Phishing
Pretexting
Baiting
Tailgating
impersonation


 14. تست نفوذ فایروال، سیستم تشخیص نفوذ IDS  و سیستم جلوگیری از نفوذ IPS را چطور انجام می دهید؟
تست نفوذ فایروال IDS IPS 
شامل ارزیابی rules ها هست
و شامل چک کردن روش های بایپس و ارزیابی واکنش آن ها هست
Wafw00f
Nmap
Hping
netcat



 15. آسیب پذیری های که روی  وب اپلیکیشن داخل شبکه قرار دارد  چیست ؟
هیچ تفاوتی بین وب اپ های داخلی شبکه با بیرونی وجود ندارد همان آسیب پذیری های owasp مثل sql xss

 16. چگونه از شناسایی شدن در حین تست نفوذ جلوگیری می کنید؟
در فرآیند تست نفوذ باید مثل هکر همه حملات و lateral movement داخل شبکه به صورت مخفیانه انجام شود تا ارزیابی به صورت واقعی انجام شود.

17. اهمیت گزارش تست نفوذ چه میزان است و چه مواردی را رعایت می کنید؟
مستندسازی یافته ها و ایجاد گزارش های دقیق تضمین می کند که سازمان می تواند آسیب پذیری ها را درک کند و اقدامات مناسب را برای بهبود امنیت انجام دهد.

 18. آیا می توانید مفهوم حملات "Man-in-the-Middle" و نحوه جلوگیری از آنها را توضیح دهید؟
حمله ای ما بین کلاینت و سرور می باشد و می توان توسط این حمله شبکه را شنود، تغییر در پکت و ارسال پکت به جای دیگر انجام داد.
جهت جلوگیری از این حمله می توان از زیرساخت CA استفاده کرد.

 19. برخی از حملات رمزنگاری متداول که می توانند در شبکه انجام شوند کدامند؟
بروت فورس کردن کلید رمزنگاری اگر الگوریتم رمزنگاری از طول کلید کم استفاده کرده باشه
Bruteforce attack
برای پیدا کردن کلید رمزنگاری
Known plaintext attack
Chosen plaintext attack

 20. با  دستورالعمل های قانونی و اخلاقی در حین تست نفوذ آشنا هستید؟
تست نفوذ باید طبق قرارداد و قوانین ذکر شده در مفاد قرارداد باشد و دقیقا همان دامنه یا scope که در خواست شده تست شود و دسترسی به اطلاعات حساس فقط با اجازه کارفرما و طبق قرارداد باشد و NDA وجود داشته باشد. همچنین نباید موجب اختلال در کسب و کار ایجاد شود.

سوالات مصاحبه تست نفوذ شبکه سطح حرفه ای:
1. توانایی مدیریت تیم تست نفوذ دارید؟ بزرگ ترین چالشی که برخوردید چه بوده و چگونه هندل کردید؟
بله، برای تست نفوذ شبکه بانکی، نیازمند برگزاری جلسات مختلف برای شناسایی معماری شبکه و هماهنگی با واحد IT می باشد همین طور چون شبکه های بزرگ مثل شبکه بانکی mixed هستند از تکنولوژی ها سخت افزارها و سیستم عاملهای مختلف استفاده میشود برای مدیریت بهتر نیازمند برنامه ریزی دقیق برای کشف attack surface و attack vector ها بود که با کمک تیم و استفاده از automation توانستیم نقاط ورودی و خروجی و نقاط ضعف را کشف کنیم.

 2. چگونه آخرین نوع حملات سایبری را دنبال می کنید؟
شرکت در کنفرانس ها یا خواندن مقالات
شرکت در وبینار شرکت های امنیتی
 خواندن وبلاگ ها
بررسی ابزارهای جدید امنیتی در گیت هاب 
 مطالعه بلاگ ها روزانه در medium 
همچنین در صورت فرصت شرکت در CTF

 3. در یک شبکه در مقیاس بزرگ، چگونه ارزیابی آسیب پذیری ها را اولویت بندی می کنید؟
عموما در تست نفوذ رویکرد اولویت بندی بر اساس ارزیابی ریسک روی زیرساخت حساس و همچنین خود آسیب پذیری می باشد. CPE, CVE
مثل ذخیره سازها، سرویسهای که در سطح کشور سرویس می دهند که بر اساس مدیریت ریسک اولویت بندی می شود.

 4. تست نفوذ شبکه ابری Cloud به چه صورت است ؟
به صورت کلی زیرساخت های ابری  مثل AWS Azure GCP و … به ندرت آسیب پذیری دارند و مشکل بیشتر سمت پیکربندی  نادرست سازمان ها می باشد مثل کنترل دسترسی و امنیت API، رمزنگاری روی ذخیره سازها و مشکلات  Inadequate Identity and Access Management IAM و  حملات DDOS جزوی از این مشکلات هستند.

 5. با مفهوم Vulnerability Chaining آشنایی دارید؟ تا حالا انجام دادید؟
ترکیب خلاقانه چند آسیب پذیری را Vulnerability Chaining می نامند. امکان این وجود دارد یک آسیب پذیری به تنهایی امکان سوء استفاده نداشته باشد ولی در کنار آسیب پذیری دیگر بتوان impact بالاتری داشته باشد. مثلا weak password یا یوزر و پسورد دیفالت و از طریق ورود به یک سرور داخل شبکه و بالا بردن سطح دسترسی به اکتیو دایرکتوری رسید.

 6. چگونه گزارش فنی خودتان را برای افراد رده مدیریت ارائه می دهید؟
برای ارائه و تحویل گزارش تست نفوذ به افراد غیر فنی و مدیران باید از powerpoint و نمودار و تصویرهای زیاد استفاده کرد تا بتوان ریسک در کسب و کار و مشکلات در صورت برطرف نشدن با نمایش نمودار خسارت توجیه کرد.

 7. وقتی داده های حساسی را طی تست نفوذ بدست آورید، چه اقداماتی را انجام می دهید؟
هر زمان در طول تست نفوذ به داده های حساس کارمندان مدیران یا مشتری ها سازمان بر می خورم. تست نفوذ متوقف و این مورد را به کارفرما اطلاع می دهم و طبق مفاد قرارداد به قوانین احترام می گذارم تا به مشکلات قانونی نخورم.

 8. چه روش‌ها یا چارچوب‌هایی (مانند OSSTMM، PTES، NIST SP 800-115) را برای تست نفوذ شبکه انتخاب میکنید چرا؟
من از methodology ها و standard های مختلف به صورت ترکیبی استفاده می کنم و هیچگاه روند تست نفوذ کامل بر اساس PTES یا NIST نیست بلکه ترکیبی از متدلوژی ها استفاده میکنم چون شرایط متفاوت است و باید طبق شرایط روش ها را ترکیب کرد.

 9. می توانید چندین تکنیک Evasion را نام ببرید ؟ برای این کار از ابزار خاصی استفاده می کنید؟
روش های دور زدن از قبیل 
IP fragmentation
Protocol level obfuscation
Covert channel

 10. رد تیم تا حالا انجام دادید ؟ تفاوت تست نفوذ با رد تیم در چیست؟
ردتیم با تست نفوذ خیلی متفاوت است در ردتیم حملات گروه های APT شبیه سازی می شود و هدفش بررسی و ارزیابی مکانیسم های دفاعی و بلو تیم است.
در حالی که تست نفوذ هدفش کشف تمامی گپ های آسیب پذیری ها مشکلات کانفیگ هست و از مهندسی اجتماعی در رد تیم استفاده می شود نه تست نفوذ
 11. تست نفوذ شبکه IoT به چه صورت انجام می دهید؟
تست نفوذ دستگاه های اینترنت اشیا شامل:
مهندسی معکوس
تجزیه و تحلیل communication protocols
شناسایی attack vectors
برای تست نفوذ باید  بررسی کرد نحوه جدا سازی از شبکه اصلی صورت گرفته یا نه، احراز هویت، رمزنگاری و بررسی communication protocols امکان شنود وجود دارد یا نه.
 12. به عنوان یک سنیور تست نفوذ شبکه چطوری تیم خودتان که جونیور هستند را راهنمایی و کمک می کنید؟
یکی از وظیفه های سنیور راهنمایی اعضای تازه ورود یا جونیور هست مثل آموزش دادن، کمک در حل چالش ها، بررسی گزارش هاشون و کمک در بهتر کردن گزارش نویسی، ایجاد حس خوب در جونیور که بتواند مشکلات را بیان کند.

 13. با مفهوم 0day آشنایی دارید؟ در پروژه تست نفوذ به کار می رود ؟ به چه صورت؟
آسیب پذیری های که شناخته شده نیستند 0day نام دارند. نحوه تست برای کشف این آسیب پذیری ها از طریق تست نفوذ جعبه سفید میسر است. و نیازمند تحلیل منطق که در حال اجرا می باشد و معماری برنامه است.
 14. پس از اتمام تست نفوذ، به چه نحوی شما روش های جلوگیری یا پچ کردن مشکلات شبکه را انتقال می دهید؟
با توجه به CVE و اولویت در ریسک آسیب پذیری به سازمان راه حل برای رفع مشکل PATCH یا کاهش سطح مخاطره MITIGATION در گزارش تست نفوذ ارائه می کنم.

 15. تا حالا شده در حین تست نفوذ، تیم امنیتی جلوی شما را بگیرد واکنش شما چه بوده است؟
بله چندین بار شده بوده در موارد مختلف بلاک شوم یا دسترسی قطع شود ولی با استفاده از بک دورها دوباره دسترسی برگرداندم و خیلی مخفیانه بدون که تیم امنیتی سازمان بفهمد ادامه تست نفوذ را انجام دادم و از حملات بروت فورس و اسکن شبکه خودداری کردم.
 16. تا حالا شده سازمانی از شما بخواهد چراغ خاموش تست نفوذ بزنید؟ واکنش شما چی بوده است؟
بله چندین بار شده که به صورت قانونی از من خواسته شده تست نفوذ را بدون اینکه ادمین شبکه یا کارکنان شبکه بدانند انجام دهم و من این کار با رعایت عدم شناسایی تیم انجام دادم و تمامی attack vector ها را پیاده سازی و مشکلات امنیتی ثبت و در گزارش قید کردم ولی به صورت غیر قانونی درخواست هایی که شده بود را همگی رد کردم تا دچار مشکل قانونی نشوم.

17. تا حالا شده بعد از ارایه تست نفوذ شما سازمانی بخواهد از شما که معماری شبکه را تغییر بدهید؟
**تغییرات قابل توجه در آزمایش نفوذ:** "در یک تعامل، چندین آسیب پذیری را شناسایی کردیم که داده های مشتریان را در معرض دید قرار می داد و می تواند منجر به زیان های مالی قابل توجهی شود. یافته های ما سازمان را بر آن داشت تا شیوه های امنیتی خود را بازسازی کند، و در آموزش های اضافی برای کارکنان سرمایه گذاری کند. و کنترل های امنیتی قوی را برای جلوگیری از حوادث آینده اجرا کنید."

 18. با قوانین و مقررات تست نفوذ آشنایی دارید چطور مطمئن می شوید اعضای تیم شما آن ها را رعایت می کنند؟
بله با  قوانین GDPR و HIPAA  آشنا هستم. در طول تست نفوذ کلیه تست ها در محیط شرکت و هیچ شخصی خارج شرکت امکان دسترسی ندارد و همه اعضای تیم اجبار به حفظ قوانین حریم شخصی مشتری هستند تا هیچ یک اطلاعات به بیرون درز نکند.


 19. آیا تجربه روی تست نفوذ شبکه  صنعتی ICS و SCADA داشتید ؟ 
ارزیابی شبکه های صنعتی نیازمند دانش آکادمیک و فنی روی این شبکه ها است. مانند انواع تست نفوذ ابتدا با ارزیابی ریسک زیرساخت انجام می شود و سپس به ارزیابی communication protocol و تجزیه تحلیل آن ها باید پرداخته شود و نیازمند چند مهندس عملیات صنعتی در تیم تست نفوذ هست تا درک درستی از سازکار داشته باشیم و بتوانیم آسیب پذیری را کشف و اکسپلویت کنیم این نوع تست نفوذ باید تحت تدابیر امنیتی بالا انجام شود تا مشکلی در زیرساخت پیش نیاید یا اطلاعات به بیرون درز نکند.

20. به عنوان یک سنیور در فرآیند انجام تست هاتون از اسکریپت نویسی استفاده می کنید؟ به چه صورت؟
بله بیشتر اوقات فراغت را صرف automation فرایندهایی که تکراری هستند می کنم و یک gitlab دارم که تمام اسکریپت ها و documentation آن را آنجا نگه داری میکنم این ابزارها به مرور جمع شده اند و شخصی سازی شده اند.
